function randomX(){var e=Math.floor(Math.random()*wallWidth);return e}TweenMax.set(".glass1",{force3D:!0});var maintl,maintl2,maintl3,_bannerStatus={done:0},gameOver=!1,endingAnimationPlayed=!1,isAutoPlay=!1,textBoxHeight,_ingredientsArray=["american-cheese","bacon","burger-patty","egg","grilled-chicken","ketchup","lettuce","mayonaise","pickles","pineapple","red-onions","romaine-lettuce","steak-burger","swiss-cheese"],plate=document.getElementById("plate"),theBurger=document.getElementById("the-burger"),ingredientsContainer=document.querySelector(".ingredients-container"),ingredientsContainerBack=document.querySelector(".ingredients-container-back"),cardText=document.querySelector(".card-text"),countBox=document.getElementById("count-down"),nameInput=document.getElementById("name-input-textfield"),theCount=15,ingredientSpawnTimer,gameRenderTimer,autoPlayTimer,autoPlayNames=["The Big Daddy of Daddy's Daddy","Megahit Wonder Burger","Colossal Wonderment","The Knife and Forker","Pretty Pretty Yummy Yummy","Yummy Yummy To my Tummy Tum Tummy","Robots would eat me","The Yuminator"],stackTop,mouseX=0,mouseY=0,mouseoffsetY=0,mouseoffsetX=150,bW=300,bH=600,plateW=178,tableTopWidth=1080,wallWidth=663,ingredientsDivs=[],burgerName="";!function(){function e(){console.log("enableReplay"),document.querySelector(".replay-button").addEventListener("click",a)}function a(){console.log("replayBanner"),TweenMax.to(".replay-button",.5,{autoAlpha:0}),document.querySelector(".replay-button").removeEventListener("click",a),gameOver=!1,endingAnimationPlayed=!1,isAutoPlay=!1,theCount=15,ingredientsDivs=[],burgerName="",maintl.seek(0),maintl3.seek(0),countBox.innerHTML=":15",theBurger.innerHTML="",TweenMax.set(".plate-burger",{x:0,y:0,scale:1}),TweenMax.set(".ending-solid-red",.5,{autoAlpha:1}),TweenMax.set(".count-down",.5,{autoAlpha:0}),TweenMax.set(".name-burger-section",.5,{autoAlpha:1}),maintl.play()}function t(){autoPlayTimer=setTimeout(o,5e3),n(),console.log("waiting")}function n(){document.querySelector(".playnow").addEventListener("click",r),document.querySelector(".playnow").addEventListener("touchstart",r)}function o(){TweenMax.to(".playnow",.5,{autoAlpha:0}),T(),isAutoPlay=!0,gameOver=!0,endingAnimationPlayed=!0,f();var e=Math.floor(Math.random()*autoPlayNames.length),a=autoPlayNames[e],t=a;nameInput.value=t.toUpperCase(),nameInput.readOnly=!0,cardText.innerHTML=nameInput.value,textBoxHeight=document.getElementById("theCardText").clientHeight,console.log("textbox height-> "+textBoxHeight),h(textBoxHeight),console.log("autoplay",isAutoPlay),TweenMax.to(".instructions-full",.5,{autoAlpha:0},0);var n=["steak-burger","american-cheese","ketchup","pineapple","romaine-lettuce","grilled-chicken","mayonaise","egg","burger-patty","lettuce","pickles","swiss-cheese","red-onions","bacon","top-bun"],o=new TimelineMax;o.add("frame0",0);for(var r=0;r<n.length;r++){var s=document.createElement("div");s.className="png-element ingredient-faller "+n[r],theBurger.appendChild(s);var i=s.getBoundingClientRect(),l=Math.floor((plateW-i.width)/2)-42;stackTopChange=10;var c=0;(s.className.indexOf("pickles")>-1||s.className.indexOf("red-onions")>-1)&&("chrome"===y&&(stackTopChange=6),"safari"===y&&(stackTopChange=6),"firefox"===y&&(stackTopChange=8)),s.className.indexOf("egg")>-1&&("chrome"===y&&(stackTopChange=6),"safari"===y&&(stackTopChange=6),"firefox"===y&&(stackTopChange=6)),s.className.indexOf("bacon")>-1&&("chrome"===y&&(stackTopChange=6),"safari"===y&&(stackTopChange=6),"firefox"===y&&(stackTopChange=6)),(s.className.indexOf("lettuce")>-1||s.className.indexOf("ketchup")>-1||s.className.indexOf("mayonaise")>-1)&&("chrome"===y&&(stackTopChange=6),"safari"===y&&(stackTopChange=6),"firefox"===y&&(stackTopChange=6)),(s.className.indexOf("grilled-chicken")>-1||s.className.indexOf("burger-patty")>-1||s.className.indexOf("steak-burger")>-1)&&("chrome"===y&&(stackTopChange=10),"safari"===y&&(stackTopChange=10),"firefox"===y&&(stackTopChange=10)),s.className.indexOf("pineapple")>-1&&("chrome"===y&&(stackTopChange=5),"safari"===y&&(stackTopChange=5),"firefox"===y&&(stackTopChange=5)),(s.className.indexOf("swiss-cheese")>-1||s.className.indexOf("american-cheese")>-1)&&("chrome"===y&&(stackTopChange=6),"safari"===y&&(stackTopChange=6),"firefox"===y&&(stackTopChange=6)),TweenMax.set(s,{x:l,y:-60}),stackTop-=stackTopChange,o.to(s,.5,{y:stackTop-c,ease:Power2.easeOut},"frame0+="+.25*r)}o.add("frame1","+=.5").to(".ending-solid-red",.5,{autoAlpha:1},"frame1").to(".count-down",.5,{autoAlpha:0},"frame1").staggerTo([".plate-burger"],.5,{y:"-118",scale:1.355,ease:Power2.easeInOut,transformOrigin:"50% 100%"},.003,"frame1+=1").add("frame2","+=0").to(".name-burger-section",.5,{autoAlpha:1},"frame2").to(".outroBg",.5,{autoAlpha:1},"frame2").add("frame3","+=.25").addCallback(function(){maintl3.play()},"frame3").seek(0)}function r(){TweenMax.to(".playnow",.5,{autoAlpha:0}),console.log("game init"),TweenMax.to(".instructions-full",.5,{autoAlpha:0},0),clearTimeout(autoPlayTimer),isAutoPlay||(document.querySelector(".stage").addEventListener("mousemove",s),document.querySelector(".stage").addEventListener("touchmove",s)),ingredientSpawnTimer=setInterval(i,500),gameRenderTimer=setInterval(c,100),i(),d()}function s(e){mouseX=e.clientX,yPos=e.clientY,void 0==mouseX&&(mouseX=e.changedTouches[e.changedTouches.length-1].clientX,yPos=e.changedTouches[e.changedTouches.length-1].clientY)}function i(){var e=2,a=document.createElement("div");a.className="png-element ingredient-faller "+_ingredientsArray[Math.floor(Math.random()*_ingredientsArray.length)],ingredientsContainer.appendChild(a),ingredientsDivs.push(a),TweenMax.set(a,{x:randomX(),y:0}),TweenMax.to(a,e,{y:600,ease:Linear.easeNone,onUpdate:l,onUpdateParams:[a]})}function l(e){var a=e._gsTransform.y,t=e.getBoundingClientRect(),n=t.left,o=plate.getBoundingClientRect(),r=o.left,s=(o.top,Math.floor(o.left+o.width));if(isAutoPlay)ingredientsContainerBack.appendChild(e);else if(a>=stackTop-t.height&&a<=stackTop+t.height/2)if(r<=n&&n<=s){stackTopChange=10;var i=0;(e.className.indexOf("pickles")>-1||e.className.indexOf("red-onions")>-1)&&("chrome"===y&&(stackTopChange=6),"safari"===y&&(stackTopChange=1),"firefox"===y&&(stackTopChange=8)),e.className.indexOf("egg")>-1&&("chrome"===y&&(stackTopChange=6),"safari"===y&&(stackTopChange=4),"firefox"===y&&(stackTopChange=6)),e.className.indexOf("bacon")>-1&&("chrome"===y&&(stackTopChange=6),"safari"===y&&(stackTopChange=1),"firefox"===y&&(stackTopChange=6)),(e.className.indexOf("lettuce")>-1||e.className.indexOf("ketchup")>-1||e.className.indexOf("mayonaise")>-1)&&("chrome"===y&&(stackTopChange=6),"safari"===y&&(stackTopChange=2),"firefox"===y&&(stackTopChange=6)),(e.className.indexOf("grilled-chicken")>-1||e.className.indexOf("burger-patty")>-1||e.className.indexOf("steak-burger")>-1)&&("chrome"===y&&(stackTopChange=10),"safari"===y&&(stackTopChange=6),"firefox"===y&&(stackTopChange=10)),e.className.indexOf("pineapple")>-1&&("chrome"===y&&(stackTopChange=5),"safari"===y&&(stackTopChange=3),"firefox"===y&&(stackTopChange=5)),(e.className.indexOf("swiss-cheese")>-1||e.className.indexOf("american-cheese")>-1)&&("chrome"===y&&(stackTopChange=6),"safari"===y&&(stackTopChange=4),"firefox"===y&&(stackTopChange=6)),stackTop-=stackTopChange,TweenMax.killTweensOf(e,{y:!0});var l=t.left-theBurger.getBoundingClientRect().left,c=Math.floor((plateW-t.width)/2)-42,d=stackTop-i;theBurger.appendChild(e),TweenMax.fromTo(e,.15,{x:l},{x:c,y:d,ease:Power2.easeInOut,onComplete:u})}else ingredientsContainerBack.appendChild(e);a>=600&&(u(),ingredientsContainerBack.removeChild(e),console.log("removed ingredient"))}function c(){if(!isAutoPlay){var e=mouseX,a=e/300*(tableTopWidth/2)*-1,t=e/300*(wallWidth/2)*-1,n=function(){var a=e-mouseoffsetX;return a<=-140?a=-140:a>=120&&(a=120),a};TweenMax.to(plate,.25,{x:n()}),TweenMax.to(theBurger,.25,{x:n()}),TweenMax.to(".table-top",1.05,{x:a}),TweenMax.to(".wall, .ingredients-container, .ingredients-container-back",1,{x:t})}}function d(){theCount>0?(theCount--,TweenMax.delayedCall(1,d),theCount<10?countBox.innerHTML=":0"+theCount:countBox.innerHTML=":"+theCount):gameOver=!0}function u(){gameOver&&!endingAnimationPlayed&&(endingAnimationPlayed=!0,x(),m())}function m(){clearInterval(gameRenderTimer),clearInterval(ingredientSpawnTimer)}function g(){console.log(nameInput.value),cardText.innerHTML=nameInput.value.toUpperCase(),textBoxHeight=document.getElementById("theCardText").clientHeight,console.log("textbox height-> "+textBoxHeight),TweenMax.delayedCall(.1,h,[textBoxHeight]),maintl3.play()}function h(e){var a=98,t=.5*(a-e)-8;TweenMax.set(cardText,{y:t})}function f(){C&&(nameInput.value="",C=!1)}function p(e){var a=23;void 0!=e.target.value&&e.target.value.toString().length>=a&&e.preventDefault()}function x(){T(),document.querySelector(".stage").removeEventListener("mousemove",s),document.querySelector(".submit-button").addEventListener("click",g),document.querySelector(".name-textfield").addEventListener("click",f),document.querySelector(".name-textfield").addEventListener("keypress",p),TweenMax.killTweensOf(ingredientsDivs),TweenMax.to(".ingredients-container, .ingredients-container-back",1,{autoAlpha:0});var e=document.createElement("div");e.className="png-element top-bun",theBurger.appendChild(e),stackTop-=25,maintl2=new TimelineMax,maintl2.add("frame0","+=.5").to(plate,.3,{x:0},"frame0").to(theBurger,.3,{x:0},"frame0").fromTo(e,.6,{y:-600},{y:stackTop,ease:Power2.easeInOut},"frame0+=.5").add("frame1","+=.5").to(".ending-solid-red",.5,{autoAlpha:1},"frame1").to(".count-down",.5,{autoAlpha:0},"frame1").staggerTo([".plate-burger"],.5,{y:"-118",scale:1.355,ease:Power2.easeInOut,transformOrigin:"50% 100%"},.003,"frame1+=1").add("frame2","+=0").to(".name-burger-section",.5,{autoAlpha:1},"frame2").to(".outroBg",.5,{autoAlpha:1},"frame2").seek(0)}function T(){for(var e="",a=0;a<120;a++){var t=Math.round(90*Math.random()),n=Math.round(Math.sqrt(3600*Math.random())+190),o='<div class="bubble" style="left:'+t+"px;top:"+n+'px"></div>';e+=o}document.querySelector(".glass1").innerHTML=e;for(var e=document.querySelectorAll(".bubble"),r=0;r<e.length;r++){var o=e[r],s=new TimelineMax({repeat:-1});s.from(o,1,{autoAlpha:0},5*Math.random()).fromTo(o,2.2,{scale:0},{scale:.15*Math.random()+.3},"-=1").to(o,5,{y:-230+50*Math.random(),ease:Power0.easeNone},"+="+3*Math.random())}}var y="";isIE=!!document.documentMode,isEdge=!isIE&&!!window.StyleMedia,y=navigator.userAgent.indexOf("Chrome")==-1||isEdge?navigator.userAgent.indexOf("Safari")==-1||isEdge?navigator.userAgent.indexOf("Firefox")!=-1?"firefox":navigator.userAgent.indexOf("MSIE")!=-1||1==!!document.documentMode?"ie":isEdge?"edge":"other-browser":"safari":"chrome",document.querySelector(".banner").classList.add(y),maintl=new TimelineMax,maintl3=new TimelineMax({paused:!0}),stackTop=plate.getBoundingClientRect().top-10,console.log("stackTop:"+stackTop);var k=document.createElement("div");k.className="png-element bottom-bun",theBurger.appendChild(k),TweenMax.set(cardText,{rotation:5,transformOrigin:"0% 0%"}),TweenMax.set(".logo",{x:13,y:2,scale:1.75,transformOrigin:"0% 0%"}),maintl.add("frame0",0).to(".stage",.01,{autoAlpha:1},"frame0").set(".ending-solid-red",{autoAlpha:0}).set(".name-burger-section",{autoAlpha:0}).set(".outroBg",{autoAlpha:0}).set(".soda",{x:-150}).set(".glass1",{x:-150}).set(".fries",{x:450}).set(".card",{x:-250}).set(".share-button",{autoAlpha:0,scale:.5}).add("frame1",2).from(".introbg",.75,{height:600,ease:Power2.easeInOut},"frame1").to(".intro-burger",.75,{y:600,ease:Power2.easeInOut},"frame1").to(".logo",.75,{x:142,y:480,z:.001,scale:.865,ease:Power2.easeInOut},"frame1").from(".cta-button",.35,{autoAlpha:0,scale:.37,ease:Back.easeOut},"frame1+=.75").to(".introbg",.5,{autoAlpha:0,ease:Power2.easeInOut},"frame1+=.35").add("frame2","+=0").fromTo(k,.6,{y:-145},{y:467,ease:Bounce.easeOut,onComplete:t},"frame2").set(".playnow",{css:{zIndex:1500}},"frame2").seek(0),maintl3.add("frame3","0").to(".name-burger-section",.5,{x:310,ease:Power2.easeIn},"frame3").to(".soda",.25,{x:0,ease:Power2.easeOut},"frame3+=.5").to(".glass1",.25,{x:0,ease:Power2.easeOut},"frame3+=.5").to(".fries",.25,{x:0,ease:Power2.easeOut},"frame3+=.5").to(".card",.45,{x:0,ease:Power2.easeOut},"frame3+=.5").add("frame4","+=0").to(".share-button",.5,{autoAlpha:1,scale:1,ease:Back.easeOut},"frame4").to(".cta-glare",.4,{x:260,ease:Power2.easeOut,onComplete:function(){TweenMax.set(".cta-glare",{x:0})}}).from(".replay-button",.5,{autoAlpha:0}).addCallback(e).seek(0);var C=!0}(),document.querySelector(".cta-button").addEventListener("mouseover",function(){TweenMax.to(".cta-glare",.4,{x:260,ease:Power2.easeOut})}),document.querySelector(".cta-button").addEventListener("mouseout",function(){TweenMax.to(".cta-glare",.4,{x:0,ease:Power2.easeOut})});