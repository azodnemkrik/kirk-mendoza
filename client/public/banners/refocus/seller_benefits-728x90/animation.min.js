var navigationArray=[],currentPage=0,previousPage=-1,direction,slidingDuration=.75,isAnimating=!1,btnLeft,btnRight,autoPlay=!0,delayTime=7,bannerWidth=728,totalPages=4,numberBox1=document.querySelector(".moneycounter1"),numberBox2=document.querySelector(".moneycounter2"),counter1={value:0},counter2={value:0},maintl,item0TL,item1TL,item2TL,item3TL,TLArray=[];!function(){function e(){var e=g.touches.touchmove.x-g.touches.touchstart.x,a=g.touches.touchmove.y-g.touches.touchstart.y;return console.log(e,a),Math.abs(e)<30&&Math.abs(a)<30?"none":e<=-30&&Math.abs(a)<30?"RIGHT":e>=30&&Math.abs(a)<30?"LEFT":void 0}function a(){for(var e=0;e<totalPages;e++){var a=document.querySelector(".nav-"+e);navigationArray.push(a),a.addEventListener(d,t),console.log(a);var o=".itemContainer"+e,r=document.querySelector(o);TweenMax.set(r,{x:e*bannerWidth})}btnLeft=document.querySelector(".arrow-L"),btnLeft.addEventListener(d,t),btnRight=document.querySelector(".arrow-R"),btnRight.addEventListener(d,t),item0TL=new TimelineMax({repeat:-1,yoyo:!0,repeatDelay:3}),item0TL.add("frame0",0).set(".page-desktop",{x:84},"frame0").set(".page-mobile",{x:20},"frame0").to(".site-desktop",1.5,{y:-42,ease:Power1.easeInOut},"frame0+=.75").to(".site-mobile",1.5,{y:-75,ease:Power1.easeInOut},"frame0+=.75").to(".site-desktop",.5,{x:-84,ease:Power1.easeInOut},"frame0+=2.5").to(".site-mobile",.5,{x:-20,ease:Power1.easeInOut},"frame0+=2.5").to(".page-desktop",.5,{x:0,ease:Power1.easeInOut},"frame0+=2.5").to(".page-mobile",.5,{x:0,ease:Power1.easeInOut},"frame0+=2.5").seek(0),item1TL=new TimelineMax({repeat:-1,yoyo:!1,repeatDelay:.5}),item1TL.add("frame0",0).from(".cam1",.75,{y:42,ease:Power1.easeInOut},"frame0+=0").from(".cam2",.75,{y:30,ease:Power1.easeInOut},"frame0+=0").from(".stat-bar",.75,{height:6,ease:Power1.easeInOut},"frame0+=0").fromTo(counter1,.5,{value:0},{value:1799,onUpdate:i,ease:Power4.easeInOut},"frame0+=0.25").fromTo(counter2,.5,{value:0},{value:1259,onUpdate:l,ease:Power4.easeInOut},"frame0+=0.25").fromTo(numberBox1,.5,{scale:1},{scale:1.15,ease:Back.easeOut},"frame0+=1.25").to(numberBox1,.25,{scale:1,ease:Back.easeOut},"frame0+=1.75").add("frame1","+=1.35").to(".cam1",.5,{y:42,ease:Power1.easeIn},"frame1+=0").to(".cam2",.5,{y:30,ease:Power1.easeIn},"frame1+=0").to(".stat-bar",.5,{height:6,ease:Power1.easeIn},"frame1+=0").to(counter1,.5,{value:0,onUpdate:i,ease:Power1.easeIn},"frame1+=0").to(counter2,.5,{value:0,onUpdate:l,ease:Power1.easeIn},"frame1+=0").add("frame2","+=.25").set(".moneycounter2",{autoAlpha:0},"frame2+=0").to(".cam1, .cam2",.25,{autoAlpha:0,ease:Power1.easeInOut},"frame2+=0").from(".cam3, .cam4",.25,{autoAlpha:0,ease:Power1.easeInOut},"frame2+=.25").add("frame3","+=.25").set(".moneycounter2",{autoAlpha:1},"frame3+=0").from(".cam3",.75,{y:39,ease:Power1.easeInOut},"frame3+=0").from(".cam4",.75,{y:28,ease:Power1.easeInOut},"frame3+=0").to(".stat-bar1",.75,{height:50,ease:Power1.easeInOut},"frame3+=0").to(".stat-bar2",.75,{height:39,ease:Power1.easeInOut},"frame3+=0").to(counter1,.5,{value:1899,onUpdate:i,ease:Power4.easeInOut},"frame3+=.25").to(counter2,.5,{value:1329,onUpdate:l,ease:Power4.easeInOut},"frame3+=.25").fromTo(numberBox1,.5,{scale:1},{scale:1.15,ease:Back.easeOut},"frame3+=1.25").to(numberBox1,.25,{scale:1,ease:Back.easeOut},"frame3+=1.75").add("frame4","+=1.35").to(".cam3",.5,{y:39,ease:Power1.easeIn},"frame4+=0").to(".cam4",.5,{y:28,ease:Power1.easeIn},"frame4+=0").to(counter1,.5,{value:0,onUpdate:i,ease:Power1.easeIn},"frame4+=0").to(counter2,.5,{value:0,onUpdate:l,ease:Power1.easeIn},"frame4+=0").to(".stat-bar",.5,{height:6,ease:Power1.easeIn},"frame4+=0").add("frame5","+=.25").set(".moneycounter2",{autoAlpha:0},"frame5+=0").to(".cam3, .cam4",.25,{autoAlpha:0,ease:Power1.easeInOut},"frame5+=0").to(".cam1, .cam2",.25,{autoAlpha:1,ease:Power1.easeInOut},"frame5+=.25").seek(),item2TL=new TimelineMax,item2TL.add("frame0",0).set(".site-build-notch1",{zIndex:21},"frame0").fromTo(".site-build-camera",3,{x:0,y:11,scale:1},{x:0,y:8,scale:.72,rotation:0,ease:Power3.easeInOut},"frame0+=.25").from(".phone-L",.5,{autoAlpha:0,scale:1.05,ease:Power4.easeInOut},"frame0+=0.25").from(".phone-R",.5,{autoAlpha:0,scale:1.05,ease:Power4.easeInOut},"frame0+=0.25").from(".phone-L",1,{x:-8,ease:Power4.easeIn},"frame0+=0.25").from(".phone-R",1,{x:8,ease:Power4.easeIn},"frame0+=0.25").from(".site-build-notch1",.25,{autoAlpha:0,scale:1.2,ease:Power4.easeInOut},"frame0+=1.25").from(".site-build-notch1",.35,{y:-6,zIndex:21,ease:Power4.easeIn},"frame0+=1.5").fromTo(".phone-container",1,{x:0,y:-34,rotation:-90,transformOrigin:"50% 50%"},{x:0,y:-36,rotation:0,ease:Power2.easeInOut,transformOrigin:"50% 50%"},"frame0+=1.8").from(".site-build",1,{height:0,ease:Power4.easeInOut},"frame0+=1.8").to(".phone-container",1,{y:0,ease:Power1.easeInOut},"frame0+=2.9").to(".site-build-camera",1,{y:44,ease:Power1.easeInOut},"frame0+=2.9").seek(0),item3TL=new TimelineMax,item3TL.add("frame0",0).set(".truck",{x:356,scale:.525},"frame0").to(".wheel-back",6,{rotation:4320,ease:Power0.easeNone,repeat:-1,transformOrigin:"49% 51%"},"frame0").to(".wheel-front",6,{rotation:4320,ease:Power0.easeNone,repeat:-1,transformOrigin:"51% 49%"},"frame0").fromTo(".truck",.1,{y:-28},{y:-27,ease:Power0.easeNone,repeat:-1,yoyo:!0},"frame0").fromTo("#masker , .truck-body",2,{x:-2},{x:2,ease:Power1.easeInOut,repeat:-1,yoyo:!0},"frame0").fromTo(".glare1",3,{x:50,autoAlpha:.75},{x:-70,ease:Power0.easeNone,repeat:-1,autoAlpha:.5},"frame0").fromTo(".glare2",.5,{x:60,autoAlpha:.5},{x:-50,ease:Power0.easeNone,repeat:-1,autoAlpha:.25},"frame0").staggerFrom(".check , .shield",.35,{scale:0,rotation:90,transformOrigin:"50% 50%",ease:Back.easeOut},.5,"frame0+=0").seek(0),TLArray=[item0TL,item1TL,item2TL,item3TL]}function t(e){if(autoPlay=!1,console.log("\n",e),!isAnimating){isAnimating=!0,TweenMax.killDelayedCallsTo(c);var a=e.target,t=a.classList[1];if("navBtn"==t){for(var o=0;o<navigationArray.length;o++){var n=navigationArray[o];n==a&&(previousPage=currentPage,currentPage=o)}direction=currentPage<previousPage?"LEFT":"RIGHT"}else"arrow-L"==a.classList[2]?(previousPage=currentPage,currentPage--,direction="LEFT",currentPage<0&&(currentPage=totalPages-1,direction="RIGHT")):(previousPage=currentPage,currentPage++,direction="RIGHT",currentPage>totalPages-1&&(currentPage=0,direction="LEFT")),slidingDuration=.75;r()}}function o(){for(var e=0;e<navigationArray.length;e++){var a=navigationArray[e];a.classList.remove("selected")}}function r(){o();var e=navigationArray[currentPage];e.classList.add("selected"),n()}function n(){var e=document.querySelector(".itemsContainer"),a=currentPage*-bannerWidth;TweenMax.to(e,slidingDuration,{x:a,ease:Power4.easeInOut,onStart:function(){u()},onComplete:function(){isAnimating=!1}})}function s(){console.log("resetItemAnimation"),TweenMax.to(".text0, .text1, .text2, .text3",.25,{autoAlpha:0,y:10,delay:.25,ease:Power4.easeIn});for(var e=0;e<TLArray.length;e++){var a=TLArray[e];e!=previousPage&&(a.seek(0).stop(),1==e&&(TweenMax.set(counter1,{value:0,onUpdate:i}),TweenMax.set(counter2,{value:0,onUpdate:l})))}}function u(){var e;switch(currentPage){case 0:default:e=item0TL;break;case 1:e=item1TL;break;case 2:e=item2TL;break;case 3:e=item3TL}var a=".text"+currentPage+"a",t=".text"+currentPage+"b",o=".text"+currentPage+"c",r=".text"+currentPage+"d",n=".text"+currentPage+"e";0!=currentPage?TweenMax.staggerTo([a,t,o,r,n],.5,{autoAlpha:1,y:0,ease:Power2.easeOut,delay:.85,onStart:function(){e.play()},onComplete:m},.1):TweenMax.staggerTo([a,t,o,r,n],.5,{autoAlpha:1,y:0,ease:Power2.easeOut,delay:.85,onStart:function(){e.play()},onComplete:m},.1),s(),console.log("showItem"),console.log("autoPlay",autoPlay)}function m(){console.log("startTimer"),TweenMax.delayedCall(delayTime,c)}function c(){t({target:btnRight}),autoPlay=!0}function i(){var e=Math.round(counter1.value),a=f(e),t=document.querySelector(".stat-bar2").clientHeight;numberBox1.innerHTML="$"+a,t<10?TweenMax.set(".moneycounter1",{autoAlpha:0}):TweenMax.set(".moneycounter1",{autoAlpha:1})}function l(){var e=Math.round(counter2.value),a=f(e),t=document.querySelector(".stat-bar2").clientHeight;numberBox2.innerHTML="$"+a,t<10?(TweenMax.set(".label2",{autoAlpha:0}),TweenMax.set(".moneycounter2",{x:3})):(TweenMax.set(".label2",{autoAlpha:1}),TweenMax.set(".moneycounter2",{x:0}))}function f(e){return e.toString().replace(/.(?=(?:.{3})+$)/g,"$&,")}var d="ontouchstart"in document.documentElement?"touchend":"click";console.log("myEvent: "+d);var g={touches:{touchstart:{x:-1,y:-1},touchmove:{x:-1,y:-1},touchend:!1,direction:"undetermined"},touchHandler:function(a){var o;if("undefined"!=typeof a&&(a.preventDefault(),"undefined"!=typeof a.touches))switch(o=a.touches[0],a.type){case"touchstart":g.touches[a.type].x=o.pageX,g.touches[a.type].y=o.pageY,touching=!0;case"touchmove":g.touches[a.type].x=o.pageX,g.touches[a.type].y=o.pageY;break;case"touchend":touching=!1,"LEFT"===e()&&(console.log("I got the LEFT message"),t({target:btnLeft})),"RIGHT"===e()&&(console.log("I got the RIGHT message"),t({target:btnRight}))}},init:function(){document.querySelector(".stage").addEventListener("touchstart",g.touchHandler,!1),document.querySelector(".stage").addEventListener("touchmove",g.touchHandler,!1),document.querySelector(".stage").addEventListener("touchend",g.touchHandler,!1)}};g.init(),a(),maintl=new TimelineMax,maintl.add("frame0",0).set(".text",{autoAlpha:0,y:10,onComplete:u},"frame0").to(".stage",.05,{autoAlpha:1},"frame0+=.25").add("frame1","+=1").staggerFrom(".devices , .navigation ",.5,{autoAlpha:0,y:10,ease:Power4.easeOut},.1,"frame1").seek(0)}();